<%= stylesheet_link_tag "catalogue" %>
<%= stylesheet_link_tag "home" %>

<%= render 'shared/public_navbar' %>

<div class="training-catalog-header">
  <div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <div>
        <h1 class="training-catalog-title">Catalogue de Formations Professionnelles</h1>
        <p class="training-catalog-subtitle">Formations techniques et sécurité pour entreprises et professionnels</p>
      </div>
      <%= link_to catalog_pdf_trainings_path(search: params[:search], type: params[:type]), 
          style: "background: white; color: #1e3a8a; padding: 1rem 2rem; font-weight: 700; text-decoration: none; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: all 0.3s; display: inline-block;" do %>
        <i class="fas fa-file-pdf"></i> Télécharger le catalogue complet (PDF)
      <% end %>
    </div>
  </div>
</div>

<div class="container">
  <!-- Barre de recherche -->
  <div class="training-search-bar">
    <%= form_with url: trainings_path, method: :get, local: true do |f| %>
      <%= f.text_field :search, 
          placeholder: "Rechercher une formation par titre, type ou contenu...", 
          class: "training-search-input",
          value: params[:search] %>
    <% end %>
  </div>

  <!-- Filtres -->
  <div class="training-filters">
    <%= link_to "Toutes les formations", trainings_path, class: "filter-btn #{params[:type].blank? ? 'active' : ''}" %>
    <%= link_to "Formation Initiale", trainings_path(type: 'initiale'), class: "filter-btn #{params[:type] == 'initiale' ? 'active' : ''}" %>
    <%= link_to "Recyclage", trainings_path(type: 'recyclage'), class: "filter-btn #{params[:type] == 'recyclage' ? 'active' : ''}" %>
   
  </div>

  <% if @trainings.empty? %>
    <div style="background: white; padding: 4rem; text-align: center; box-shadow: 0 2px 15px rgba(0,0,0,0.05);">
      <p style="color: #64748b; font-size: 1.2rem; font-weight: 500;">Aucune formation disponible pour le moment.</p>
    </div>
  <% else %>
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); gap: 2rem; margin-bottom: 3rem;">
      <% @trainings.each do |training| %>
        <%= link_to training_path(training), class: "training-card" do %>
          <% if training.image_url.present? %>
            <div class="training-card-image">
              <img src="<%= training.image_url %>" alt="<%= training.title %>">
            </div>
          <% end %>
          
          <div class="training-card-body">
            <h3 class="training-card-title"><%= training.title %></h3>
            
            <div class="training-card-badges">
              <% if training.training_type.present? %>
                <span class="training-badge training-badge-primary"><%= training.training_type %></span>
              <% end %>
              <span class="training-badge">⏱ <%= training.duration %></span>
            </div>

            <% if training.description.present? %>
              <p class="training-card-description">
                <%= truncate(training.description, length: 160) %>
              </p>
            <% end %>

            <div class="training-card-footer">
              <div class="training-price-box training-price-box-intra">
                <span class="training-price-label">Prix Intra HT</span>
                <span class="training-price-value"><%= training.price_intra_formatted %></span>
              </div>
              <div class="training-price-box training-price-box-inter">
                <span class="training-price-label">Prix Inter HT / Stagiaire</span>
                <span class="training-price-value"><%= training.price_inter_formatted %></span>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>

<div class="container" style="margin-top: 4rem; margin-bottom: 4rem;">
  <section class="info-section">
    <h3>Adaptation et suivi des formations :</h3>
    <p>Un suivi des formation et accompagnement seront réalisés tout au long des formations. Les formations pourront être adaptées pour palier à des difficultés majeures rencontrées par l'apprenant.</p>
  </section>

  <section class="info-section">
    <h3>Évaluation de parcours :</h3>
    <p>Le contrôle de connaissances permettant de vérifier le niveau de connaissances acquis, est effectué selon les modalités suivantes : Questionnaires / Cas pratique / Mise en situation</p>
  </section>

  <section class="info-section">
    <h3>Évaluation du besoin :</h3>
    <p>Un questionnaire sera proposé pour analyser l'adéquation du besoin de formation avec les formations dispensées suivant la demande.</p>
  </section>

  <section class="info-section">
    <h3>Test de positionnement :</h3>
    <p>Un test de positionnement sera proposé pour adapter la formation avec le niveau de connaissance du stagiaire suivant la formation demandé.</p>
  </section>

  <section class="info-section">
    <h3>Validation de votre inscription :</h3>
    <p>A l'issue de votre candidature, vous recevrez par email une convocation pour participer à la formation accompagner d'un livret d'accueil récapitulant l'ensemble des informations vous permettant de vous préparer.</p>
  </section>

  <section class="info-section">
    <h3>Handicap :</h3>
    <p>Toutes les formations dispensées à CHAFF sont accessibles aux personnes en situation de handicap. Lors de l'inscription à nos formations, nous étudions avec le candidat en situation de handicap et à travers un questionnaire les actions que nous pouvons mettre en place pour favoriser son apprentissage.</p>
    <p>Pour cela, nous pouvons également nous appuyer sur un réseau de partenaires nationaux préalablement identifiés.</p>
    
    <h4 style="margin-top: 1.5rem; margin-bottom: 1rem; font-weight: 600;">Coordonnées du référent handicap :</h4>
    
    <div style="margin-bottom: 1.5rem;">
      <p><strong>AGEFIPH</strong></p>
      <p>Isabelle GRUYELLE</p>
      <p>04 74 94 20 21</p>
      <p>rhf-ara@agefiph.asso.fr</p>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <p><strong>MDPH</strong></p>
      <p>MDPH 07 Pôle Astier-Froment BP 606 07007 Privas cedex</p>
      <p>0 800 070 700</p>
      <p>mdph@ardeche.fr</p>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <p><strong>CAP EMPLOI</strong></p>
      <p>Quartier Queue du Loup 85 impasse de l'Ouvèze</p>
      <p>07000 - Saint-Julien-en-Saint-Alban</p>
      <p>Tel : 04 69 23 05 50</p>
    </div>

    <div>
      <p><strong>Association Pour Adultes et Jeunes Handicapés</strong></p>
      <p>Association APAJH de l'Ardèche</p>
      <p>5 Rue Saint-Prix Barou 07100 Annonay</p>
    </div>
  </section>
</div>

